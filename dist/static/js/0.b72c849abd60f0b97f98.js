webpackJsonp([0],{"3lNj":function(t,e){},"5b8+":function(t,e){},CwSZ:function(t,e,a){"use strict";var o=a("p8xL"),r=a("XgCd"),i={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},s=Date.prototype.toISOString,l={delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,serializeDate:function(t){return s.call(t)},skipNulls:!1,strictNullHandling:!1},n=function t(e,a,r,i,s,n,c,d,u,p,m,f){var b=e;if("function"==typeof c)b=c(a,b);else if(b instanceof Date)b=p(b);else if(null===b){if(i)return n&&!f?n(a,l.encoder):a;b=""}if("string"==typeof b||"number"==typeof b||"boolean"==typeof b||o.isBuffer(b))return n?[m(f?a:n(a,l.encoder))+"="+m(n(b,l.encoder))]:[m(a)+"="+m(String(b))];var v,h=[];if(void 0===b)return h;if(Array.isArray(c))v=c;else{var _=Object.keys(b);v=d?_.sort(d):_}for(var y=0;y<v.length;++y){var g=v[y];s&&null===b[g]||(h=Array.isArray(b)?h.concat(t(b[g],r(a,g),r,i,s,n,c,d,u,p,m,f)):h.concat(t(b[g],a+(u?"."+g:"["+g+"]"),r,i,s,n,c,d,u,p,m,f)))}return h};t.exports=function(t,e){var a=t,s=e?o.assign({},e):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===s.delimiter?l.delimiter:s.delimiter,d="boolean"==typeof s.strictNullHandling?s.strictNullHandling:l.strictNullHandling,u="boolean"==typeof s.skipNulls?s.skipNulls:l.skipNulls,p="boolean"==typeof s.encode?s.encode:l.encode,m="function"==typeof s.encoder?s.encoder:l.encoder,f="function"==typeof s.sort?s.sort:null,b=void 0!==s.allowDots&&s.allowDots,v="function"==typeof s.serializeDate?s.serializeDate:l.serializeDate,h="boolean"==typeof s.encodeValuesOnly?s.encodeValuesOnly:l.encodeValuesOnly;if(void 0===s.format)s.format=r.default;else if(!Object.prototype.hasOwnProperty.call(r.formatters,s.format))throw new TypeError("Unknown format option provided.");var _,y,g=r.formatters[s.format];"function"==typeof s.filter?a=(y=s.filter)("",a):Array.isArray(s.filter)&&(_=y=s.filter);var k,C=[];if("object"!=typeof a||null===a)return"";k=s.arrayFormat in i?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var A=i[k];_||(_=Object.keys(a)),f&&_.sort(f);for(var w=0;w<_.length;++w){var x=_[w];u&&null===a[x]||(C=C.concat(n(a[x],x,A,d,u,p?m:null,y,f,b,v,g,h)))}var F=C.join(c),D=!0===s.addQueryPrefix?"?":"";return F.length>0?D+F:""}},DDCP:function(t,e,a){"use strict";var o=a("p8xL"),r=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:o.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},s=function(t,e,a){if(t){var o=a.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,i=/(\[[^[\]]*])/g,s=/(\[[^[\]]*])/.exec(o),l=s?o.slice(0,s.index):o,n=[];if(l){if(!a.plainObjects&&r.call(Object.prototype,l)&&!a.allowPrototypes)return;n.push(l)}for(var c=0;null!==(s=i.exec(o))&&c<a.depth;){if(c+=1,!a.plainObjects&&r.call(Object.prototype,s[1].slice(1,-1))&&!a.allowPrototypes)return;n.push(s[1])}return s&&n.push("["+o.slice(s.index)+"]"),function(t,e,a){for(var o=e,r=t.length-1;r>=0;--r){var i,s=t[r];if("[]"===s)i=(i=[]).concat(o);else{i=a.plainObjects?Object.create(null):{};var l="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,n=parseInt(l,10);!isNaN(n)&&s!==l&&String(n)===l&&n>=0&&a.parseArrays&&n<=a.arrayLimit?(i=[])[n]=o:i[l]=o}o=i}return o}(n,e,a)}};t.exports=function(t,e){var a=e?o.assign({},e):{};if(null!==a.decoder&&void 0!==a.decoder&&"function"!=typeof a.decoder)throw new TypeError("Decoder has to be a function.");if(a.ignoreQueryPrefix=!0===a.ignoreQueryPrefix,a.delimiter="string"==typeof a.delimiter||o.isRegExp(a.delimiter)?a.delimiter:i.delimiter,a.depth="number"==typeof a.depth?a.depth:i.depth,a.arrayLimit="number"==typeof a.arrayLimit?a.arrayLimit:i.arrayLimit,a.parseArrays=!1!==a.parseArrays,a.decoder="function"==typeof a.decoder?a.decoder:i.decoder,a.allowDots="boolean"==typeof a.allowDots?a.allowDots:i.allowDots,a.plainObjects="boolean"==typeof a.plainObjects?a.plainObjects:i.plainObjects,a.allowPrototypes="boolean"==typeof a.allowPrototypes?a.allowPrototypes:i.allowPrototypes,a.parameterLimit="number"==typeof a.parameterLimit?a.parameterLimit:i.parameterLimit,a.strictNullHandling="boolean"==typeof a.strictNullHandling?a.strictNullHandling:i.strictNullHandling,""===t||null===t||void 0===t)return a.plainObjects?Object.create(null):{};for(var l="string"==typeof t?function(t,e){for(var a={},o=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,s=e.parameterLimit===1/0?void 0:e.parameterLimit,l=o.split(e.delimiter,s),n=0;n<l.length;++n){var c,d,u=l[n],p=u.indexOf("]="),m=-1===p?u.indexOf("="):p+1;-1===m?(c=e.decoder(u,i.decoder),d=e.strictNullHandling?null:""):(c=e.decoder(u.slice(0,m),i.decoder),d=e.decoder(u.slice(m+1),i.decoder)),r.call(a,c)?a[c]=[].concat(a[c]).concat(d):a[c]=d}return a}(t,a):t,n=a.plainObjects?Object.create(null):{},c=Object.keys(l),d=0;d<c.length;++d){var u=c[d],p=s(u,l[u],a);n=o.merge(n,p,a)}return o.compact(n)}},JxRc:function(t,e){},MXMv:function(t,e){},MsJm:function(t,e){},Qfom:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("7+uW"),r=a("mw3O"),i=a.n(r),s=a("mtWM"),l=a.n(s);a("zL8q");const n=l.a.create({baseURL:o.default.prototype.api_base_url,timeout:5e3});n.interceptors.request.use(t=>("post"===t.method&&(t.data=i.a.stringify(t.data),t.data=JSON.stringify(t.data)),t),t=>(console.log(t),Promise.reject(t)));var c=n;function d(){return c({url:"/metas",method:"get"})}function u(t){return c({url:"/resources/meta_attributes/"+t,method:"get"})}function p(){return c({url:"/meta_attributes",method:"get"})}function m(){return c({url:"/meta_attributes",method:"get"})}var f={data:()=>({radio:"",tableData:[],nodeList:[],drdbStatus:"",disableEditDialog:!1,disableMigrateDialog:!1,disableGroupAddDialog:!1,disableCloneDialog:!1,chosenSrc:{},activeName:"first",disableAddDialog:!1,addForm:{},metas:[],metaAttris:[],operationAttris:[],instanceAttris:[],addingRules:{name:[{required:!0,message:"请输入资源名称",trigger:"blur"}],type:[{required:!0,message:"请输入资源类型",trigger:"blur"}],device:[{required:!0,message:"请输入device",trigger:"blur"}],directory:[{required:!0,message:"请输入directory",trigger:"blur"}],fstype:[{required:!0,message:"请输入fstype",trigger:"blur"}]},locationVisible:!1,colocationVisible:!1,orderVisible:!1,location:{masterNode:[],slave1:[]},colocation:{same_node:[],diff_node:[]},order:{before_rscs:[],after_rscs:[]}}),computed:{showButtons(){return!this.radio},showEdit(){return!this.chosenSrc.type||"ms-drbd"==this.chosenSrc.id||"drbd-ps:0"==this.chosenSrc.id||"drbd-ps:1"==this.chosenSrc.id}},created(){this.dataLoading()},methods:{setMetaAttris(t){o.default.set(this.addForm,this.addForm.metaAttris,t)},showRow(t){this.radio=t.id,this.chosenSrc=t},dataLoading(){let t=this;c({url:"/resources",method:"get"}).then(e=>{t.tableData=e.data.data}),c({url:"/nodes",method:"get"}).then(e=>{t.nodeList=e.data.data}),c({url:"/drbd_status",method:"get"}).then(e=>{t.drdbStatus=e.data.data})},openAddDialog(){let t=this;t.addForm={},d().then(e=>{t.metas=e.data.data,t.disableAddDialog=!0}),u("primitive").then(e=>{t.metaAttris=e.data.data}),p().then(e=>{t.instanceAttris=e.data.instanceAttris}),m().then(e=>{t.operationAttris=e.data.operationAttris})},openGroupDialog(){let t=this;t.addForm={},d().then(e=>{t.metas=e.data.metas,t.disableGroupAddDialog=!0}),u("group").then(e=>{t.metaAttris=e.data.metaAttris}),p().then(e=>{t.instanceAttris=e.data.instanceAttris}),m().then(e=>{t.operationAttris=e.data.operationAttris})},openClongDialog(){let t=this;t.addForm={},d().then(e=>{t.metas=e.data.metas,t.disableCloneDialog=!0}),u("clone").then(e=>{t.metaAttris=e.data.metaAttris}),p().then(e=>{t.instanceAttris=e.data.instanceAttris}),m().then(e=>{t.operationAttris=e.data.operationAttris})},addRscSelected(){console.log(this.addForm)},openDialog(t){let e=this;"edit"==t?(e.disableEditDialog=!0,"group"===e.chosenSrc.type&&getGroupInfo(e.chosenSrc.id).then(t=>{e.groupInfo=t.data})):e.disableMigrateDialog=!0},operate(t,e){let a="resources/"+e+"/"+t;"edit"==t||"migrate"==t?this.openDialog(t):(console.log("ez"),function(t){return c({url:t,method:"PUT"})}(a).then(()=>{this.$message({type:"success",message:"resource"+t+"success"})}))}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-operate"},[a("div",{staticClass:"button-group"},[a("el-row",[a("el-dropdown",{scopedSlots:t._u([{key:"dropdown",fn:function(){return[a("el-dropdown-menu",{attrs:{placement:"bottom-end"}},[a("el-dropdown-item",{nativeOn:{click:function(e){return t.openAddDialog(e)}}},[t._v("添加普通资源")]),t._v(" "),a("el-dropdown-item",{nativeOn:{click:function(e){return t.openGroupDialog(e)}}},[t._v("添加组资源")]),t._v(" "),a("el-dropdown-item",{nativeOn:{click:function(e){return t.openClongDialog(e)}}},[t._v("添加克隆资源")])],1)]},proxy:!0}])},[a("el-button",{staticClass:"el-dropdown-link operations",staticStyle:{}},[t._v("添加")])],1),t._v(" "),a("div",{staticClass:"easy-operation"},[a("el-button",{staticClass:"operations",attrs:{disabled:t.showEdit,id:"edit"},on:{click:function(e){return t.operate("edit",t.radio)}}},[t._v("编辑\n        ")]),t._v(" "),a("el-button",{staticClass:"operations",attrs:{disabled:t.showButtons,id:"start"},on:{click:function(e){return t.operate("start",t.radio)}}},[t._v("启动\n        ")]),t._v(" "),a("el-button",{staticClass:"operations",attrs:{disabled:t.showButtons,id:"stop"},on:{click:function(e){return t.operate("stop",t.radio)}}},[t._v("停止\n        ")]),t._v(" "),a("el-button",{staticClass:"operations",attrs:{disabled:t.showButtons,id:"cleanup"},on:{click:function(e){return t.operate("cleanup",t.radio)}}},[t._v("清理\n        ")]),t._v(" "),a("el-button",{staticClass:"operations",attrs:{disabled:!0,id:"migrate"},on:{click:function(e){return t.operate("migrate",t.radio)}}},[t._v("迁移\n        ")]),t._v(" "),a("el-button",{staticClass:"operations",attrs:{disabled:!0,id:"unmigrate"},on:{click:function(e){return t.operate("unmigrate",t.radio)}}},[t._v("回迁\n        ")])],1),t._v(" "),a("el-popconfirm",{attrs:{title:"确定删除资源吗？"},scopedSlots:t._u([{key:"reference",fn:function(){return[a("el-button",{staticClass:"operations",attrs:{disabled:t.showButtons}},[t._v("删除")])]},proxy:!0}])}),t._v(" "),a("el-dropdown",{scopedSlots:t._u([{key:"dropdown",fn:function(){return[a("el-dropdown-menu",[a("el-dropdown-item",[a("span",{on:{click:function(e){t.locationVisible=!0}}},[t._v("资源位置")])]),t._v(" "),a("el-dropdown-item",[a("span",{on:{click:function(e){t.colocationVisible=!0}}},[t._v("资源协同")])]),t._v(" "),a("el-dropdown-item",[a("span",{on:{click:function(e){t.orderVisible=!0}}},[t._v("资源顺序")])])],1)]},proxy:!0}])},[a("el-button",{staticClass:"el-dropdown-link operations",attrs:{disabled:t.showButtons}},[t._v("关系")])],1),t._v(" "),a("el-button",{staticClass:"operations",staticStyle:{float:"right"},on:{click:t.dataLoading}},[t._v("刷新")])],1)],1),t._v(" "),a("el-table",{ref:"singleTable",attrs:{data:t.tableData,"row-key":"id","tree-props":{children:"subrscs",hasChildren:"hasChildren"},"header-cell-style":{"background-color":"#fafafa"},"row-style":{height:"60px"},"highlight-current-row":"",height:"750"},on:{"row-click":t.showRow}},[a("el-table-column",{attrs:{width:"40"}}),t._v(" "),a("el-table-column",{attrs:{label:"选择",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio",{staticClass:"radio",attrs:{label:e.row.id},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("\n           \n        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"id",label:"资源名"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.row.status,placement:"top"}},[a("span",[t._v("图标")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"type",label:"资源类型"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"svc",label:"服务"}}),t._v(" "),t._l(t.nodeList,function(e,o){return[a("el-table-column",{key:o,scopedSlots:t._u([{key:"header",fn:function(){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.status,placement:"top"}},[a("span",[t._v("图标")])]),t._v(" "),a("span",[t._v(t._s(e.id))])]},proxy:!0},{key:"default",fn:function(a){return[t._l(a.row.running_node.length,function(o){return[t._v("\n            "+t._s(a.row.running_node[o-1]==e.id?a.row.running_node[o-1]:"")+"\n          ")]})]}}],null,!0)})]})],2),t._v(" "),a("el-dialog",{staticClass:"basicAddDialog",attrs:{title:"创建资源",visible:t.disableAddDialog,width:"30%"},on:{"update:visible":function(e){t.disableAddDialog=e}}},[a("el-form",{ref:"addForm",attrs:{rules:t.addingRules},model:{value:t.addForm,callback:function(e){t.addForm=e},expression:"addForm"}},[a("el-tabs",{staticClass:"button-tabs"},[a("el-tab-pane",{staticClass:"tab-panels",attrs:{label:"基本"}},[a("div",[a("el-form-item",{attrs:{label:"资源名称",prop:"name"}},[a("span",[a("el-input",{staticClass:"block",model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1)])],1),t._v(" "),a("div",[a("el-form-item",{attrs:{label:"资源类型",prop:"type"}},[a("span",[a("el-cascader",{staticClass:"cascader dropdowns selections",attrs:{options:t.metas,props:{expandTrigger:"hover"}},on:{change:t.addRscSelected},model:{value:t.addForm.type,callback:function(e){t.$set(t.addForm,"type",e)},expression:"addForm.type"}})],1)])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.addForm.type,expression:"addForm.type"}],staticClass:"invi-panels"},[a("el-form-item",{attrs:{label:"device",prop:"device"}},[a("el-input",{staticClass:"block",model:{value:t.addForm.device,callback:function(e){t.$set(t.addForm,"device",e)},expression:"addForm.device"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"directory",prop:"directory"}},[a("el-input",{staticClass:"block",model:{value:t.addForm.directory,callback:function(e){t.$set(t.addForm,"directory",e)},expression:"addForm.directory"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"fstype",prop:"fstype"}},[a("el-input",{staticClass:"block",model:{value:t.addForm.fstype,callback:function(e){t.$set(t.addForm,"fstype",e)},expression:"addForm.fstype"}})],1)],1)]),t._v(" "),t.addForm.type?a("el-tab-pane",{staticClass:"tab-panels",attrs:{label:"实例属性"}},[a("div",[a("span",{staticClass:"labels"},[t._v(" 需要修改的实例属性： ")]),t._v(" "),t.metaAttris?a("span",{staticClass:"block"},[a("el-select",{attrs:{multiple:"",placeholder:"请选择",size:"small"},model:{value:t.addForm.instanceAttris,callback:function(e){t.$set(t.addForm,"instanceAttris",e)},expression:"addForm.instanceAttris"}},t._l(t.instanceAttris,function(t){return a("el-option",{key:t.key,attrs:{label:t.key,value:t.name}})}),1)],1):t._e()])]):t._e(),t._v(" "),a("el-tab-pane",{staticClass:"tab-panels",attrs:{label:"元属性"}},[a("div",[t._v("\n            需要修改的元属性：\n            "),t.metaAttris?a("span",{staticClass:"block"},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},on:{change:t.setMetaAttris},model:{value:t.addForm.metaAttris,callback:function(e){t.$set(t.addForm,"metaAttris",e)},expression:"addForm.metaAttris"}},t._l(t.metaAttris,function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.name}})}),1)],1):t._e()]),t._v(" "),t._l(t.addForm.metaAttris,function(e){return a("div",{key:e.key},[a("span",[t._v(t._s(t.metaAttris[e].name))]),t._v(" "),a("span",[a("el-input")],1)])})],2),t._v(" "),t.addForm.type?a("el-tab-pane",{staticClass:"tab-panels",attrs:{label:"操作属性"}},[a("div",[t._v("\n            需要修改的操作属性：\n            "),t.metaAttris?a("span",{staticClass:"block"},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.addForm.operationAttris,callback:function(e){t.$set(t.addForm,"operationAttris",e)},expression:"addForm.operationAttris"}},t._l(t.operationAttris,function(t){return a("el-option",{key:t.key,attrs:{label:t.key,value:t.name}})}),1)],1):t._e()])]):t._e(),t._v(" "),a("span",{staticClass:"hometable-dialog-footer"},[a("el-button",{on:{click:function(e){t.disableAddDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.disableAddDialog=!1}}},[t._v("确 定")])],1)],1)],1)],1),t._v(" "),a("el-dialog",{staticClass:"basicAddDialog",attrs:{title:"创建资源",visible:t.disableGroupAddDialog,width:"40%"},on:{"update:visible":function(e){t.disableGroupAddDialog=e}}},[a("el-tabs",{staticClass:"button-tabs"},[a("el-tab-pane",{staticClass:"tab-panels",attrs:{label:"基本"}},[a("div",{staticClass:"panel-contents"},[a("span",{staticClass:"labels"},[t._v(" 资源名称： ")]),t._v(" "),a("span",{staticClass:"block"},[a("el-input",{model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1)]),t._v(" "),a("div",{staticClass:"panel-contents"},[a("span",{staticClass:"labels"},[t._v(" 资源类型： ")]),t._v(" "),a("span",{staticClass:"block"},[a("el-cascader",{attrs:{options:t.metas,props:{expandTrigger:"hover"}},on:{change:t.addRscSelected},model:{value:t.addForm.type,callback:function(e){t.$set(t.addForm,"type",e)},expression:"addForm.type"}})],1)])]),t._v(" "),a("el-tab-pane",{staticClass:"tab-panels",attrs:{label:"元属性"}},[a("div",[t._v("\n          需要修改的元属性：\n          "),t.metaAttris?a("span",{staticClass:"block"},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},on:{change:t.setMetaAttris},model:{value:t.addForm.metaAttris,callback:function(e){t.$set(t.addForm,"metaAttris",e)},expression:"addForm.metaAttris"}},t._l(t.metaAttris,function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.name}})}),1)],1):t._e()]),t._v(" "),t._l(t.addForm.metaAttris,function(e){return a("div",{key:e.key},[a("span",[t._v(t._s(t.metaAttris[e].name))]),t._v(" "),a("span",[a("el-input")],1)])})],2),t._v(" "),a("span",{staticClass:"hometable-dialog-footer"},[a("el-button",{on:{click:function(e){t.disableGroupAddDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.disableGroupAddDialog=!1}}},[t._v("确 定")])],1)],1)],1),t._v(" "),a("el-dialog",{staticClass:"basicAddDialog",attrs:{title:"创建资源",visible:t.disableCloneDialog,width:"40%"},on:{"update:visible":function(e){t.disableCloneDialog=e}}},[a("el-tabs",{staticClass:"button-tabs"},[a("el-tab-pane",{staticClass:"tab-panels",attrs:{label:"基本"}},[a("div",{staticClass:"panel-contents"},[a("span",{staticClass:"labels"},[t._v(" 资源名称： ")]),t._v(" "),a("span",{staticClass:"block"},[a("el-input",{model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1)]),t._v(" "),a("div",{staticClass:"panel-contents"},[a("span",{staticClass:"labels"},[t._v(" 资源类型： ")]),t._v(" "),a("span",{staticClass:"block"},[a("el-cascader",{attrs:{options:t.metas,props:{expandTrigger:"hover"}},on:{change:t.addRscSelected},model:{value:t.addForm.type,callback:function(e){t.$set(t.addForm,"type",e)},expression:"addForm.type"}})],1)])]),t._v(" "),a("el-tab-pane",{staticClass:"tab-panels",attrs:{label:"元属性"}},[a("div",[t._v("\n          需要修改的元属性：\n          "),t.metaAttris?a("span",{staticClass:"block"},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},on:{change:t.setMetaAttris},model:{value:t.addForm.metaAttris,callback:function(e){t.$set(t.addForm,"metaAttris",e)},expression:"addForm.metaAttris"}},t._l(t.metaAttris,function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.name}})}),1)],1):t._e()]),t._v(" "),t._l(t.addForm.metaAttris,function(e){return a("div",{key:e.key},[a("span",[t._v(t._s(t.metaAttris[e].name))]),t._v(" "),a("span",[a("el-input")],1)])})],2),t._v(" "),a("span",{staticClass:"hometable-dialog-footer"},[a("el-button",{on:{click:function(e){t.disableGroupAddDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.disableGroupAddDialog=!1}}},[t._v("确 定")])],1)],1)],1),t._v(" "),a("el-dialog",{staticClass:"location",attrs:{title:"资源位置",visible:t.locationVisible,width:"600px",top:"15vh"},on:{"update:visible":function(e){t.locationVisible=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.locationVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.locationVisible=!1}}},[t._v("确 定")])],1)]},proxy:!0}])},[a("el-form",{attrs:{model:t.location,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"资源名称:"}},[a("span",[t._v(t._s(t.radio))])]),t._v(" "),a("el-form-item",{attrs:{label:"Master Node:"}},[a("el-select",{attrs:{multiple:""},model:{value:t.location.masterNode,callback:function(e){t.$set(t.location,"masterNode",e)},expression:"location.masterNode"}},t._l(t.nodeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.id,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Slave 1:"}},[a("el-select",{attrs:{multiple:""},model:{value:t.location.slave1,callback:function(e){t.$set(t.location,"slave1",e)},expression:"location.slave1"}},t._l(t.nodeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.id,value:t.id}})}),1)],1)],1)],1),t._v(" "),a("el-dialog",{staticClass:"location",attrs:{title:"资源位置",visible:t.colocationVisible,width:"600px",top:"15vh"},on:{"update:visible":function(e){t.colocationVisible=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.colocationVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.colocationVisible=!1}}},[t._v("确 定")])],1)]},proxy:!0}])},[a("el-form",{attrs:{model:t.colocation,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"资源名称:"}},[a("span",[t._v(t._s(t.radio))])]),t._v(" "),a("el-form-item",{attrs:{label:"同节点资源:"}},[a("el-select",{attrs:{multiple:""},model:{value:t.colocation.same_node,callback:function(e){t.$set(t.colocation,"same_node",e)},expression:"colocation.same_node"}},t._l(t.tableData,function(t){return a("el-option",{key:t.id,attrs:{label:t.id,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"互斥节点资源:"}},[a("el-select",{attrs:{multiple:""},model:{value:t.colocation.diff_node,callback:function(e){t.$set(t.colocation,"diff_node",e)},expression:"colocation.diff_node"}},t._l(t.tableData,function(t){return a("el-option",{key:t.id,attrs:{label:t.id,value:t.id}})}),1)],1)],1)],1),t._v(" "),a("el-dialog",{staticClass:"location",attrs:{title:"资源位置",visible:t.orderVisible,width:"600px",top:"15vh"},on:{"update:visible":function(e){t.orderVisible=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.orderVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.orderVisible=!1}}},[t._v("确 定")])],1)]},proxy:!0}])},[a("el-form",{attrs:{model:t.order,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"资源名称:"}},[a("span",[t._v(t._s(t.radio))])]),t._v(" "),a("el-form-item",{attrs:{label:"前置资源:"}},[a("el-select",{attrs:{multiple:""},model:{value:t.order.before_rscs,callback:function(e){t.$set(t.order,"before_rscs",e)},expression:"order.before_rscs"}},t._l(t.tableData,function(t){return a("el-option",{key:t.id,attrs:{label:t.id,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"后置资源:"}},[a("el-select",{attrs:{multiple:""},model:{value:t.order.after_rscs,callback:function(e){t.$set(t.order,"after_rscs",e)},expression:"order.after_rscs"}},t._l(t.tableData,function(t){return a("el-option",{key:t.id,attrs:{label:t.id,value:t.id}})}),1)],1)],1)],1)],1)},staticRenderFns:[]};var v=a("VU/8")(f,b,!1,function(t){a("JxRc")},"data-v-2938d94b",null).exports;var h={data:()=>({dialogVisible:!1,rets:{}}),created(){let t=this;c({url:"/",method:"get"}).then(e=>{t.rets=e.data.data})},methods:{updatePriority(){var t;this.dialogVisible=!1,(t=this.rets.parameters,c({url:"/",method:"put",data:t})).then(t=>{this.$message({type:"success",message:"已更新首选项"})})}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"priority-modal priority-type"},[a("div",{staticClass:"bar-text",on:{click:function(e){t.dialogVisible=!0}}},[t._v("首选项配置")]),t._v(" "),a("el-dialog",{attrs:{title:"首选项配置",visible:t.dialogVisible,"modal-append-to-body":!1,id:"priority-content"},on:{"update:visible":function(e){t.dialogVisible=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updatePriority}},[t._v("确 定")])],1)]},proxy:!0}])},[t.rets?a("div",{staticClass:"ret-form"},[a("el-form",{ref:"rets",attrs:{model:t.rets.parameters}},t._l(t.rets.parameters,function(e){return a("el-form-item",{key:e.key,staticClass:"form-items"},[a("span",{staticClass:"rebel"},[t._v("\n            "+t._s(e.name)+"\n            "),a("el-tooltip",{attrs:{effect:"dark",placement:"top",content:e.longdesc}},[a("i",{staticClass:"el-icon-question"})]),t._v("\n            :\n          ")],1),t._v(" "),a("span",{staticClass:"input-number"},["integer"==e.content.type?a("el-input-number",{attrs:{size:"mini","controls-position":"right"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"ret.value"}}):t._e(),t._v(" "),"percentage"==e.content.type?a("el-input",{attrs:{size:"mini",type:"number","controls-position":"right"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"ret.value"}},[a("template",{slot:"append"},[t._v("%")])],2):t._e(),t._v(" "),"time"==e.content.type?a("el-input",{attrs:{size:"mini",type:"number","controls-position":"right"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"ret.value"}},[a("template",{slot:"append"},[t._v(t._s("s"==e.content.unit?"s":"min"))])],2):t._e(),t._v(" "),"enum"==e.content.type?a("el-select",{attrs:{size:"mini"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"ret.value"}},t._l(e.content.values,function(t,e,o){return a("el-option",{key:o,attrs:{label:t,value:e}})}),1):t._e(),t._v(" "),"boolean"==e.content.type?a("el-switch",{attrs:{size:"mini"},model:{value:e.content.default,callback:function(a){t.$set(e.content,"default",a)},expression:"ret.content.default"}}):t._e()],1)])}),1)],1):t._e()])],1)},staticRenderFns:[]};var y=a("VU/8")(h,_,!1,function(t){a("5b8+")},null,null).exports,g={data:()=>({dialogVisible:!1,activeName:"first",backupHeartBeat:!1,form:{hbaddrs2:{0:{ip:"",nodeid:""},1:{ip:"",nodeid:""}}}}),created(){let t=this;c({url:"/configs",method:"get"}).then(e=>{t.form.hbaddrs1=e.data.data.hbaddrs1,e.data.data.hbaddrs2&&(t.form.hbaddrs2=e.data.data.hbaddrs2)})},methods:{updateHeartBeat(){var t;(t=this.form,c({url:"/configs",method:"POST",data:t})).then(()=>{this.dialogVisible=!1,this.$message({type:"success",message:"已更新心跳配置"})})}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"priority-modal"},[a("div",{staticClass:"bar-text",on:{click:function(e){t.dialogVisible=!0}}},[t._v("心跳配置")]),t._v(" "),a("el-dialog",{attrs:{title:"心跳配置",visible:t.dialogVisible,width:"650px","modal-append-to-body":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.form.hbaddrs1?a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"主心跳",name:"first"}},[a("el-form",{ref:"form",attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"节点心跳IP-ns187:"}},[a("el-input",{model:{value:t.form.hbaddrs1[0].ip,callback:function(e){t.$set(t.form.hbaddrs1[0],"ip",e)},expression:"form.hbaddrs1[0].ip"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"节点心跳IP-ns188:"}},[a("el-input",{model:{value:t.form.hbaddrs1[1].ip,callback:function(e){t.$set(t.form.hbaddrs1[1],"ip",e)},expression:"form.hbaddrs1[1].ip"}})],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"备用心跳",name:"second"}},[a("el-form",{ref:"form",attrs:{model:t.form}},[a("el-form-item",[a("el-switch",{attrs:{"inactive-text":"启用备用心跳"},model:{value:t.backupHeartBeat,callback:function(e){t.backupHeartBeat=e},expression:"backupHeartBeat"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"节点心跳IP-ns187:"}},[a("el-input",{attrs:{disabled:!t.backupHeartBeat},model:{value:t.form.hbaddrs2[0].ip,callback:function(e){t.$set(t.form.hbaddrs2[0],"ip",e)},expression:"form.hbaddrs2[0].ip"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"节点心跳IP-ns188:"}},[a("el-input",{attrs:{disabled:!t.backupHeartBeat},model:{value:t.form.hbaddrs2[1].ip,callback:function(e){t.$set(t.form.hbaddrs2[1],"ip",e)},expression:"form.hbaddrs2[1].ip"}})],1)],1)],1)],1):t._e(),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateHeartBeat}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]},C=a("VU/8")(g,k,!1,null,null,null).exports;var A={methods:{open(){this.$confirm("日志下载需要一段时间，你确定要立即下载集群日志吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$message({type:"success",message:"正在下载请稍候!"}),console.log("确认操作"),c({url:"/logs",method:"get"}).then(t=>{window.open(t.data.filepath)})}).catch(()=>{this.$message({type:"info",message:"取消下载"})})}}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"priority-modal"},[e("div",{staticClass:"bar-text",on:{click:this.open}},[this._v("日志下载")])])},staticRenderFns:[]};var x=a("VU/8")(A,w,!1,function(t){a("MXMv")},null,null).exports,F={data:()=>({dialogVisible:!1,form:{value:"",desc:""},commands:{},commandResult:""}),created(){let t=this;c({url:"/commands",method:"get"}).then(e=>{t.commands=e.data.data})},methods:{handleSelectChange(t){let e=this;var a;(a=t,c({url:"/commands/"+a,method:"get"})).then(t=>{e.form.desc=t.data.data})},handleBtnClick(){this.form={value:"",desc:""},this.dialogVisible=!1}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"priority-modal"},[a("div",{staticClass:"bar-text",on:{click:function(e){t.dialogVisible=!0}}},[t._v("集群快捷操作")]),t._v(" "),a("el-dialog",{staticClass:"operation-dialog",attrs:{title:"集群快捷操作",visible:t.dialogVisible,"modal-append-to-body":!1,top:"10vh"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleBtnClick},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:t.handleBtnClick}},[t._v("关闭")])],1)]},proxy:!0}])},[a("el-form",{ref:"form",attrs:{model:t.form}},[a("el-form-item",[a("span",[t._v("集群操作")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择操作命令"},on:{change:t.handleSelectChange},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}},t._l(t.commands,function(t,e,o){return a("el-option",{key:o,attrs:{label:t,value:e}})}),1)],1),t._v(" "),a("el-form-item",[a("span",[t._v("操作结果")]),t._v(" "),a("el-input",{attrs:{disabled:"",type:"textarea",rows:15},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1)],1)],1)],1)},staticRenderFns:[]};var O=a("VU/8")(F,D,!1,function(t){a("kl27")},"data-v-11f5114b",null).exports,j={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"top-bar"},[e("div",[this._v("title")]),this._v(" "),e("el-dropdown",{staticClass:"button-group"},[e("el-button",{attrs:{type:"default"}},[this._v("user"),e("i",{staticClass:"el-icon-user el-icon--right"})]),this._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[this._v("刷新设置")]),this._v(" "),e("el-dropdown-item",[this._v("退出登录")])],1)],1)],1)},staticRenderFns:[]};var V={data:()=>({menu:[{header:!0,title:"HA"},{title:"集群配置",icon:"iconfont icon-peizhi",child:[{component:y},{component:C}]},{title:"工具",icon:"iconfont icon-gongju",child:[{component:x},{component:O}]}],isCollapsed:!1}),components:{HomeTable:v,TopBar:a("VU/8")({},j,!1,function(t){a("3lNj")},"data-v-371b570b",null).exports},methods:{onToggleCollapse(t){this.isCollapsed=!this.isCollapsed}}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main"},[e("div",{staticClass:"top"},[e("div",{staticClass:"bar-title"}),this._v(" "),e("top-bar")],1),this._v(" "),e("div",{staticClass:"sider"},[e("sidebar-menu",{attrs:{menu:this.menu},on:{"toggle-collapse":this.onToggleCollapse}})],1),this._v(" "),e("div",{staticClass:"table",class:{collapsed:this.isCollapsed}},[e("home-table")],1)])},staticRenderFns:[]};var S=a("VU/8")(V,$,!1,function(t){a("MsJm")},null,null);e.default=S.exports},XgCd:function(t,e,a){"use strict";var o=String.prototype.replace,r=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return o.call(t,r,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},kl27:function(t,e){},mw3O:function(t,e,a){"use strict";var o=a("CwSZ"),r=a("DDCP"),i=a("XgCd");t.exports={formats:i,parse:r,stringify:o}},p8xL:function(t,e,a){"use strict";var o=Object.prototype.hasOwnProperty,r=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),i=function(t,e){for(var a=e&&e.plainObjects?Object.create(null):{},o=0;o<t.length;++o)void 0!==t[o]&&(a[o]=t[o]);return a};t.exports={arrayToObject:i,assign:function(t,e){return Object.keys(e).reduce(function(t,a){return t[a]=e[a],t},t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],a=[],o=0;o<e.length;++o)for(var r=e[o],i=r.obj[r.prop],s=Object.keys(i),l=0;l<s.length;++l){var n=s[l],c=i[n];"object"==typeof c&&null!==c&&-1===a.indexOf(c)&&(e.push({obj:i,prop:n}),a.push(c))}return function(t){for(var e;t.length;){var a=t.pop();if(e=a.obj[a.prop],Array.isArray(e)){for(var o=[],r=0;r<e.length;++r)void 0!==e[r]&&o.push(e[r]);a.obj[a.prop]=o}}return e}(e)},decode:function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),a="",o=0;o<e.length;++o){var i=e.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?a+=e.charAt(o):i<128?a+=r[i]:i<2048?a+=r[192|i>>6]+r[128|63&i]:i<55296||i>=57344?a+=r[224|i>>12]+r[128|i>>6&63]+r[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&e.charCodeAt(o)),a+=r[240|i>>18]+r[128|i>>12&63]+r[128|i>>6&63]+r[128|63&i])}return a},isBuffer:function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,a,r){if(!a)return e;if("object"!=typeof a){if(Array.isArray(e))e.push(a);else{if("object"!=typeof e)return[e,a];(r.plainObjects||r.allowPrototypes||!o.call(Object.prototype,a))&&(e[a]=!0)}return e}if("object"!=typeof e)return[e].concat(a);var s=e;return Array.isArray(e)&&!Array.isArray(a)&&(s=i(e,r)),Array.isArray(e)&&Array.isArray(a)?(a.forEach(function(a,i){o.call(e,i)?e[i]&&"object"==typeof e[i]?e[i]=t(e[i],a,r):e.push(a):e[i]=a}),e):Object.keys(a).reduce(function(e,i){var s=a[i];return o.call(e,i)?e[i]=t(e[i],s,r):e[i]=s,e},s)}}}});
//# sourceMappingURL=0.b72c849abd60f0b97f98.js.map